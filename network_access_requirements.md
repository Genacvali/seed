# ะขัะตะฑะพะฒะฐะฝะธั ะบ ัะตัะตะฒัะผ ะดะพัััะฟะฐะผ ะดะปั SEED Agent

## ะกัะตะผะฐ ัะตัะตะฒัั ะฟะพะดะบะปััะตะฝะธะน:

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ
โ   Alertmanager  โโโโโถโ  SEED Agent      โโโโโถโ   Mattermost        โ
โ   (ะปัะฑะพะน ัะพัั)  โ    โ p-dba-seed-adv-  โ    โ   (webhook URL)     โ
โ                 โ    โ msk01:8080       โ    โ                     โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
                    โโโโโโโโโโโโโโโโโโโโโโโโ
                    โ   Prometheus API     โ
                    โ prometheus.sber      โ
                    โ devices.ru:443       โ
                    โโโโโโโโโโโโโโโโโโโโโโโโ
                              โ
                              โผ
                    โโโโโโโโโโโโโโโโโโโโโโโโ
                    โ   Exporters          โ
                    โ p-smi-mng-sc-msk07   โ
                    โ :9100, :9216         โ
                    โโโโโโโโโโโโโโโโโโโโโโโโ
```

## ะขัะตะฑัะตะผัะต ะดะพัััะฟั ะดะปั SEED Agent:

### 1. **ะะฅะะะฏะฉะะ ะฟะพะดะบะปััะตะฝะธั (ะบัะพ ะฟะพะดะบะปััะฐะตััั ะ ะฐะณะตะฝัั):**
- **Alertmanager** โ `p-dba-seed-adv-msk01:8080`
- **ะะพะปัะทะพะฒะฐัะตะปะธ ะดะปั ัะตััะพะฒ** โ `p-dba-seed-adv-msk01:8080`

### 2. **ะะกะฅะะะฏะฉะะ ะฟะพะดะบะปััะตะฝะธั (ะฐะณะตะฝั ะฟะพะดะบะปััะฐะตััั ะ ะบะพะผั):**

#### A) **Prometheus API** (ะะะฏะะะขะะะฌะะ ะดะปั ะพะฑะพะณะฐัะตะฝะธั):
- `p-dba-seed-adv-msk01` โ `https://prometheus.sberdevices.ru:443`
- **ะัะพัะพะบะพะป:** HTTPS
- **ะขะธะฟ ััะฐัะธะบะฐ:** REST API ะทะฐะฟัะพัั
- **ะงะฐััะพัะฐ:** ะัะธ ะบะฐะถะดะพะผ ะฐะปะตััะต (1-5 ะทะฐะฟัะพัะพะฒ ะทะฐ ัะฐะท)

#### B) **Mattermost/Slack** (ะดะปั ัะฒะตะดะพะผะปะตะฝะธะน):
- `p-dba-seed-adv-msk01` โ `ะะะจ_MATTERMOST_URL`
- **ะัะพัะพะบะพะป:** HTTPS
- **ะขะธะฟ ััะฐัะธะบะฐ:** Webhook POST ะทะฐะฟัะพัั
- **ะงะฐััะพัะฐ:** ะัะธ ะบะฐะถะดะพะผ ะฐะปะตััะต

#### C) **GigaChat LLM** (ะพะฟัะธะพะฝะฐะปัะฝะพ, ะดะปั AI ะฐะฝะฐะปะธะทะฐ):
- `p-dba-seed-adv-msk01` โ `ngw.devices.sberbank.ru:9443` (OAuth)
- `p-dba-seed-adv-msk01` โ `gigachat.devices.sberbank.ru:443` (API)
- **ะัะพัะพะบะพะป:** HTTPS
- **ะขะธะฟ ััะฐัะธะบะฐ:** REST API ะดะปั LLM ะทะฐะฟัะพัะพะฒ

#### D) **Exporters** (ะะ ะฝัะถะฝะพ ะฐะณะตะฝัั, ัะพะปัะบะพ ะดะปั ะฟััะผะพะน ะฟัะพะฒะตัะบะธ):
- `p-smi-mng-sc-msk07:9100/metrics` - ะดะปั ะดะธะฐะณะฝะพััะธะบะธ
- `p-smi-mng-sc-msk07:9216/metrics` - ะดะปั ะดะธะฐะณะฝะพััะธะบะธ

## ะะพัััะฟั ะบะพัะพััะต ะะ ะฝัะถะฝั:

โ **SEED Agent ะะ ะฟะพะดะบะปััะฐะตััั ะฝะฐะฟััะผัั ะบ exporters**
- Prometheus ัะฐะผ ัะพะฑะธัะฐะตั ะผะตััะธะบะธ ั exporters
- SEED ะฟัะพัะธั ะดะฐะฝะฝัะต ัะพะปัะบะพ ั Prometheus API

โ **Exporters ะะ ะฟะพะดะบะปััะฐัััั ะบ SEED**
- ะญัะพ ะพะดะฝะพััะพัะพะฝะฝะธะน ัะฑะพั ัะตัะตะท Prometheus

## ะัะธัะธัะฝัะต ะดะพัััะฟั ะดะปั ัะฐะฑะพัั:

### **ะะธะฝะธะผัะผ ะดะปั ะฑะฐะทะพะฒะพะน ัะฐะฑะพัั:**
1. โ **ะัะพะดััะธะน:** `*` โ `p-dba-seed-adv-msk01:8080`
2. โ **ะััะพะดััะธะน:** `p-dba-seed-adv-msk01` โ `MM_WEBHOOK_URL`

### **ะะปั ะฟะพะปะฝะพะน ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ:**
3. โ **ะััะพะดััะธะน:** `p-dba-seed-adv-msk01` โ `https://prometheus.sberdevices.ru:443`
4. โ๏ธ **ะััะพะดััะธะน:** `p-dba-seed-adv-msk01` โ GigaChat URLs (ะพะฟัะธะพะฝะฐะปัะฝะพ)

## ะัะพะฒะตัะบะฐ ะดะพัััะฟะฝะพััะธ:

```bash
# ะัะพะฒะตัััะต ะดะพัััะฟ ะบ Prometheus
curl -I "https://prometheus.sberdevices.ru"

# ะัะพะฒะตัััะต ะดะพัััะฟ ะบ Mattermost  
curl -X POST "$MM_WEBHOOK" -d '{"text":"test"}'

# ะัะพะฒะตัััะต ะดะพัััะฟ ะบ GigaChat (ะตัะปะธ ะธัะฟะพะปัะทัะตัะต)
curl -I "https://ngw.devices.sberbank.ru:9443"
```

## ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั ั ะดะพัััะฟะฐะผะธ:

### **Prometheus ะฝะตะดะพัััะฟะตะฝ:**
- โ **ะกะธะผะฟัะพะผ:** `CPU ~ n/a ยท MEM ~ n/a`
- โ **ะะตัะตะฝะธะต:** ะัะบัะพะนัะต ะดะพัััะฟ ะธะปะธ ะฒัะตะผะตะฝะฝะพ ะพัะบะปััะธัะต (`PROM_URL=`)

### **Mattermost ะฝะตะดะพัััะฟะตะฝ:**  
- โ **ะกะธะผะฟัะพะผ:** ะะปะตััั ะพะฑัะฐะฑะฐััะฒะฐัััั, ะฝะพ ะฝะต ะฟัะธัะพะดัั ัะฒะตะดะพะผะปะตะฝะธั
- โ **ะะตัะตะฝะธะต:** ะัะบัะพะนัะต ะดะพัััะฟ ะบ webhook URL

### **GigaChat ะฝะตะดะพัััะฟะตะฝ:**
- โ๏ธ **ะกะธะผะฟัะพะผ:** ะะตั ัะตะบัะธะธ "๐ง ะะฐะณะธั ะบัะธััะฐะปะปะฐ"
- โ **ะะตัะตะฝะธะต:** ะัะบัะพะนัะต ะดะพัััะฟ ะธะปะธ ะพัะบะปััะธัะต (`USE_LLM=0`)

## ะะตะทัะผะต:

**ะะะฏะะะขะะะฌะะ ะฝัะถะตะฝ ะดะพัััะฟ:**
- ะ Prometheus API: `https://prometheus.sberdevices.ru:443`
- ะ Mattermost webhook

**ะะ ะฝัะถะตะฝ ะฟััะผะพะน ะดะพัััะฟ:**
- ะ exporters (9100, 9216) - ััะพ ะดะตะปะฐะตั Prometheus